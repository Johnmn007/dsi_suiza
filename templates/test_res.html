{%extends 'auth/base.html'%}

{%block title%}Test{%endblock%}

{%block sections%}
 

    <!-- Faq Section -->
    <section id="faq" class="faq section light-background">

      <!-- Section Title -->
      <div class="container section-title" data-aos="fade-up">
        <h2>Test Vocacional</h2>
        <p>Realiza el test y mide la compatibilidad vocacional</p>
      </div><!-- End Section Title -->

      <div class="container">

        <div class="row justify-content-center">          

            <!-- empiezal el div que contiene el cuerpodel form--------- -->

            <div class="faq-container col-6 bg-light">

              <!-- se inserto el test -->
              <form class="ms-3 mt-3 text-center" method="POST">
                {% for pregunta in preguntas %}
                <div>
                    <p >{{ pregunta.pregunta }}</p>
                    {% for opcion in pregunta.opciones %}
                    <label>
                        <input type="radio" name="pregunta_{{ pregunta.idx }}" value="{{ opcion }}" required>
                        {{ opcion }}
                    </label>
                    {% endfor %}
                </div>
                {% endfor %}
                <a class="btn btn-primary mt-5" type="submit" href="/test" >volver a realizar el test</a>
              </form>         
              <!-- finn del test insertado -->             
            </div>  

            <div class="faq-container col-5 bg-light ms-5">

              <h1>Resultado del Test</h1>
              <p>Tu compatibilidad con esta carrera es del <strong>{{ resultado }}%</strong>.</p>
              


              <div class="progress">
                <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
              </div>

              <a class="btn btn-primary mt-5 text-center" href="/">Volver al inicio</a>

              <!-- escrips para que funcione la barra de progreso------- -->
              <script>
                // Recibe el valor de 'resultado' desde el servidor (con Jinja2)
                var resultado = {{ resultado }};  // Aqu√≠ inyectamos el valor de 'resultado' de Flask
            
                // Obtener la barra de progreso y actualizar su estilo
                var progressBar = document.getElementById('progress-bar');
                progressBar.style.width = resultado + '%'; // Actualiza el ancho de la barra
                progressBar.setAttribute('aria-valuenow', resultado); // Actualiza el valor de la barra en el atributo
                progressBar.innerText = resultado + '%'; // Muestra el porcentaje dentro de la barra
              </script>
            
              <!-- Enlace a los scripts de Bootstrap 5 -->
              <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
                      
            </div>
          </div>
  
        </div>

          

      

      </section><!-- /Faq Section -->

    

  {%endblock%}

 